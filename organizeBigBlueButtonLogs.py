#!/usr/bin/env python
# -*- coding: utf-8 -*-

from Framework import common


def get_text():
    # return common.Clipboard.get()
    return """
ar
Arnaud Chapalain 
(You)

la
Laurent BARATON 
li
Lise HEMELSDAËL 
ma
Marine Moutot 
ch
Christophe 
la
Laurent BARATON
6:54 PM

Bonjour à tous et toutes. Le CT culture, c'est bien ici ! Ça commence à 19h.
li
Lise HEMELSDAËL
6:56 PM

Coucou :)
Voici le CR pour prendre des notes : https://docs.google.com/document/d/1L5J30JTl8n5bJj3axs7hQ-vn-Exm2U8-cM7jiopoywI/edit#heading=h.5ge03a6varux
li
Lise HEMELSDAËL
6:56 PM

Et la présentation qui va être diffusée : https://docs.google.com/presentation/d/1q4fAv32vxICPV05-wRszzFCrfPsbZkzu/edit#slide=id.p6

Welcome to CT Culture!

For help on using BigBlueButton see these (short) tutorial videos.

To join the audio bridge click the phone button. Use a headset to avoid causing background noise for others.

This server is running BigBlueButton.

Pour inviter quelqu'un à la réunion, envoyez-lui ce lien :
https://conf.theshifters.org/b/adm-aei-0a8-kj8
so
sophie hovanessian(Offline)
6:59 PM

bonjour
so
sophie hovanessian(Offline)
7:02 PM

les enjeux et retour d'expérience des CT
so
sophie hovanessian(Offline)
7:03 PM

sophiehovanessian@gmail.com
ma
Martin Lambert(Offline)
7:03 PM

bonjour !
la
Laurent BARATON
7:04 PM

Bonjour Martin, bienvenue ! on va commencer les présentations bientôt.
so
sophie hovanessian(Offline)
7:07 PM

je n'entend plus rien
ma
Marine Moutot
7:07 PM

Bonjour tout le monde :)

Désolée pour le retard !
de
Denis R.(Offline)
7:09 PM

Bonsoir à tou.te.s
ar
Arnaud Chapalain
7:09 PM

Bonsoir !
bl
blandine(Offline)
7:10 PM

Bonsoir !
so
sophie hovanessian(Offline)
7:15 PM

on peut donc inviter des personnes qui ne sont pas shifter?
li
Lise HEMELSDAËL
7:15 PM

On peut en rediscuter mais plutôt oui :) Et si ces personnes deviennent shifter.euses ensuite c'est trop cool
so
sophie hovanessian(Offline)
7:15 PM

ok merci lise
ar
Arnaud Chapalain
7:33 PM

Il y a eu une préparation physique pour tous ces cyclistes ?
so
sophie hovanessian(Offline)
7:35 PM

c'était quoi la moyenne d'âge des musiciens?
la
Laurent BARATON
7:36 PM

C'est pas trop compliqué le désacordage des instruments quand ils sont transportés en vélo ?
li
Lise HEMELSDAËL
7:47 PM

Comme des questions ont été prises pendant la présentation on peut avoir une petite marge :)
la
Laurence(Offline)
7:47 PM

ok
ar
Arnaud Chapalain
7:52 PM

Combien de spectateurs au total déjà ?
la
La Poursuite - Théo(Offline)
7:53 PM

J'ai un impératif, je vais devoir partir.
Merci pour cette initiative !
Je lirai le compte rendu et les suivant avec plaisir :)

Si vous souhaitez en savoir plus sur les capacité de La Poursuite à accompagner un collectif en tournée à vélo : comptant préparation, soin du corps et des instruments, aléas météo etc, vous pouvez nous contacter par mail : production@lapoursuite.fr
so
sophie hovanessian(Offline)
7:53 PM

C'ETAIT PAYANT?
ar
Arnaud Chapalain
7:55 PM

Des idées de faire des projections sur les économies de carbone potentielle, ou au contraire de l'effet rebond des personnes qui ont assisté alors que sinon elle ne l'aurait pas fait ?
ar
Arnaud Chapalain
7:56 PM

Sachant que ça a dû etre un gros depaysement pour ces communes :)
so
sophie hovanessian(Offline)
8:00 PM

donc vous pouvez faire une nouvelle tournée?
ch
Christophe
8:02 PM

Est ce que certains musiciens ne veulent surtout pas refaire cette experience (parce qu'ils trouvent que c'est trop violent physiquement)
li
Lise HEMELSDAËL
8:03 PM

Dernière question je pense :)

(niveau timing)
la
Laurence(Offline)
8:04 PM

ok
so
sophie hovanessian(Offline)
8:04 PM

je dois vous quitter merci beaucoup c'était passionnant. ou puis je retrouver le compte rendu du CT ?
la
Laurent BARATON
8:05 PM

Là : https://docs.google.com/document/d/1L5J30JTl8n5bJj3axs7hQ-vn-Exm2U8-cM7jiopoywI/edit#
de
Denis R.(Offline)
8:05 PM

Puis je poser une question vocalement ?
li
Lise HEMELSDAËL
8:05 PM

Oui mais der der haha

Il y a aussi la question de Christophe
la
Laurence(Offline)
8:05 PM

je vais te donner la parole Denis
de
Denis R.(Offline)
8:05 PM

Ok merci
so
sophie hovanessian(Offline)
8:06 PM

merci beaucoup
ar
Arnaud Chapalain
8:06 PM

Bonsoir
bl
blandine(Offline)
8:07 PM

bravo !
bl
blandine(Offline)
8:08 PM

je confirme qu'une tournée à velo est accessible a des non sportif-ves comme moi : )
ar
Arnaud Chapalain
8:09 PM

Apres le PSG, la SNCF va peut etre se mettre a dapter son offre
ma
Marine Moutot
8:10 PM

Merci beaucoup c'était top :)
ma
Martin Lambert(Offline)
8:10 PM

Merci c'était hyper intéressant !
la
Laurent BARATON
8:10 PM

Bravo Robin, et Merci Laurence pour avoir mené cette intervention !!
li
Lise HEMELSDAËL
8:10 PM

Transcription à retrouver ici : https://docs.google.com/document/d/1L5J30JTl8n5bJj3axs7hQ-vn-Exm2U8-cM7jiopoywI/edit#
li
Lise HEMELSDAËL
8:11 PM

Je laisse la main sur le CR
bl
blandine(Offline)
8:13 PM

je suis desolé ! j'ai des soucis de connexion ! je partante pour dire 2 mots a un moment s'il y a du temps à la fin ?
ch
Christophe
8:14 PM

Salut Blandine
ar
Arnaud Chapalain
8:15 PM

Pas de soucis Blandine, peut-etre au cours d'un point dans 5min qui pourrait s'y preter
ch
Christophe
8:15 PM

Si ça se trouve ce sera possible d'échanger à nouveau en fin de réunion mais là pour pas faire une réunion qui dure trop longtemps, on va vite aborder tous les points de la mensuelle du groupe culture
ch
Christophe
8:15 PM

ah bas si c'est possible plus tot encore mieux
bl
blandine(Offline)
8:15 PM

ok : )
ch
Christophe
8:22 PM

c'est quoi la date déjà ?
ro
Robin Ducancel(Offline)
8:22 PM

Encore merci pour votre écoute et votre invitation.

Pour voire Accordez vos vélos ! en vidéo :

- Accordez vos vélos ! en Ile-de-France (vidéo) : https://www.youtube.com/watch?v=SHsLYZVbluI&t=229s
- Accordez vos vélos ! Symphonie alpestre (tesaer) : https://www.youtube.com/watch?v=-6Cn9xdwkFI
- L'Oumpa'parlement de la Deûle (coproduction Opéra de Lille) : https://youtu.be/3ejE8BbFFI4
- Carnet de campagne sur France Inter : https://www.youtube.com/watch?v=2ei9A7-7d0Q
- Festival Tous en Selle : https://www.tousenselle.eu/selection-films-2022-2023

A bientôt !
Robin
ar
Arnaud Chapalain
8:23 PM

Merci beaucoup Robin !
la
Laurence(Offline)
8:23 PM

Merci Robin, bravo et bonne soirée
ar
Arnaud Chapalain
8:23 PM

On note tous les liens pour le compte rendu
li
Lise HEMELSDAËL
8:26 PM

La présentation est disponible (avec tous les liens) ici : https://docs.google.com/presentation/d/1q4fAv32vxICPV05-wRszzFCrfPsbZkzu/edit#slide=id.p6
ar
Arnaud Chapalain
8:28 PM

Le lien dont je parlais pour le bilan 2021-2022 :
https://docs.google.com/document/d/1GieftSBLeXgwkIQrqitRTpWFCQs2aUYutVKxHx5Hxlg/edit#heading=h.uw30hqef5akn
li
Lise HEMELSDAËL
8:32 PM

Numéro pour me contacter si vous souhaitez rejoindre l'équipe : 07 69 99 64 67
la
Laurence(Offline)
8:43 PM

je n'aurai pas assez de temps je suis désolée.
ar
Arnaud Chapalain
8:44 PM

C'etait pour etre taquin, mais merci quand meme ;)
la
Laurent BARATON
8:45 PM

ct-culture@theshifters.org
la
Laurent BARATON
8:48 PM

Lien pour la liste des invité :

https://docs.google.com/spreadsheets/d/1KiJjWUw9JaH92nnNxdVcsllg4g5JXKpjkemDFZtvYYY/edit#gid=219311235
ch
Charles M(Offline)
8:48 PM

Je dois vous quitter un peu tôt, passez une très bonne soirée et à très vite pour celles et ceux qui vont au festival Projection Transition !!
ar
Arnaud Chapalain
8:49 PM

Merci Charles, à bientot !
ma
Marine Moutot
8:49 PM

Salut :)
ma
Martin Lambert(Offline)
8:49 PM

Je dois y aller aussi, désolé de ne pas pouvoir rester jusqu'au bout... Merci pour l'accueil, et à bientôt !
la
Laurence(Offline)
8:49 PM

je vais aussi me déconnecter. Je vais au festival projection le dimanche (Sans Filtre). Faites-moi signe (sur slack) si vous y êtes.
ch
Christophe
8:49 PM

Cool je devrais être à une des projections de samedi à Paris !
ar
Arnaud Chapalain
8:49 PM

Merci Martin, peut etre à demain au GL 44 ?
ma
Martin Lambert(Offline)
8:50 PM

Malheureusement non, je travaille toute la soirée donc pas possible pour moi...
ar
Arnaud Chapalain
8:50 PM

Ok, bon courage dans ce cas
ma
Martin Lambert(Offline)
8:50 PM

Mais la prochaine ça devrait être bon !
ma
Martin Lambert(Offline)
8:50 PM

Merci, bonne soirée, et bonne mensuelle demain !
de
Denis R.(Offline)
8:52 PM

Merci à tou.te.s, une très bonne soirée à vous !
ar
Arnaud Chapalain
8:52 PM

Merci !
ch
Christophe
8:54 PM

top
bl
blandine(Offline)
8:55 PM

bravo ! quel plaisir de vous entendre !
ar
Arnaud Chapalain
8:56 PM

Merci Blandine pour ta présence, en espérant que tu pourras participer à certaines des choses dont on a parlé :)
bl
blandine(Offline)
9:00 PM

oui, je vais voir ca ! en tous cas, je me sens très connectée à votre élan! merci de votre accueil; avec plaisir de partager plus a l'occasion (je pourrais avoir le compte rendu ? )
ar
Arnaud Chapalain
9:01 PM

C'est le but :)
Le CR est ici, meme si on le nettoie un peu apres les sseances : https://docs.google.com/document/d/1L5J30JTl8n5bJj3axs7hQ-vn-Exm2U8-cM7jiopoywI/edit#heading=h.5ge03a6varux
bl
blandine(Offline)
9:04 PM

Bonne fin de réunion ! : )
ch
Christophe
9:04 PM

l'avant première : https://youtu.be/BVRZPD55cpo
ar
Arnaud Chapalain
9:04 PM

Merci :)
"""

def parse_discussion(text):
    text = text.strip().replace("\r", "")
    lines = text.split("\n")
    discussion = []
    lines_count = len(lines)

    def get_next_line_start(old_line):
        old_line += 3
        line = lines[old_line]
        while len(line) not in [7, 8] or line[-2:] not in ["AM", "PM"]:
            old_line += 1
            if old_line >= lines_count:
                return lines_count
            line = lines[old_line]
        return old_line - 2

    i = get_next_line_start(-1)
    while i != lines_count:
        next_date_idx = get_next_line_start(i)
        nick = lines[i+1].replace("(Offline)", "")
        comment = "\n".join(lines[i+3: next_date_idx]).strip()
        discussion.append([nick, comment])
        i = next_date_idx
    return discussion


def print_cleaned_discussion(discussion):
    for x in discussion:
        print(x[0] + ":\t" + x[1])


def process():
    text = get_text()
    discussion = parse_discussion(text)
    print_cleaned_discussion(discussion)


process()
print("END")
